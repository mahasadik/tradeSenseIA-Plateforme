BEGIN TRANSACTION;
CREATE TABLE "plan" (
	id INTEGER NOT NULL, 
	name VARCHAR(80) NOT NULL, 
	price_dh INTEGER NOT NULL, 
	starting_balance FLOAT NOT NULL, 
	PRIMARY KEY (id)
);
INSERT INTO "plan" VALUES(1,'Starter',199,5000.0);
INSERT INTO "plan" VALUES(2,'Pro',399,10000.0);
INSERT INTO "plan" VALUES(3,'Elite',799,20000.0);
CREATE TABLE setting (
	id INTEGER NOT NULL, 
	"key" VARCHAR(80) NOT NULL, 
	value VARCHAR(255) NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
);
CREATE TABLE trade (
	id INTEGER NOT NULL, 
	challenge_id INTEGER NOT NULL, 
	symbol VARCHAR(30) NOT NULL, 
	market VARCHAR(20) NOT NULL, 
	side VARCHAR(10) NOT NULL, 
	qty FLOAT NOT NULL, 
	entry_price FLOAT NOT NULL, 
	exit_price FLOAT, 
	pnl FLOAT, 
	status VARCHAR(10), 
	opened_at DATETIME, 
	closed_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(challenge_id) REFERENCES user_challenge (id)
);
INSERT INTO "trade" VALUES(1,1,'AAPL','YAHOO','BUY',1.0,150.0,155.0,5.0,'CLOSED','2026-01-17 17:57:47.357873',NULL);
INSERT INTO "trade" VALUES(2,1,'TSLA','YAHOO','SELL',2.0,700.0,NULL,NULL,'OPEN','2026-01-17 17:57:47.357873',NULL);
CREATE TABLE user (
	id INTEGER NOT NULL, 
	email VARCHAR(180) NOT NULL, 
	password_hash VARCHAR(255) NOT NULL, 
	first_name VARCHAR(100), 
	last_name VARCHAR(100), 
	phone VARCHAR(20), 
	currency VARCHAR(10), 
	role VARCHAR(30), 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (email)
);
INSERT INTO "user" VALUES(1,'alice@example.com','scrypt:32768:8:1$NS5ZTpFeETe6T94p$60be71d4cde0613c5f51ae1639abeec9f998e96d056ffbb131021e9f1242eac515a271ccf9434e6cd460483bee478a9cd7daaed9ede6bf311bc2f916e8f68938',NULL,NULL,NULL,'MAD','user','2026-01-17 17:57:47.332750');
INSERT INTO "user" VALUES(2,'bob@example.com','scrypt:32768:8:1$msuaY5dKsmBhn7SD$80908c5dee4c332d5d1d40563ac7db7aa34830c7c3ec4823068a0bf8bfdcb580cbe73230fc6b1bf3554fcfed28bb81b8a007ac25da26c1a871ebb3edccb074df',NULL,NULL,NULL,'MAD','user','2026-01-17 17:57:47.332750');
INSERT INTO "user" VALUES(3,'superadmin@example.com','scrypt:32768:8:1$8egY10omcN6puHl4$74a82fc9f64de29dcbefdfb7fc0104550b4ba82de794fac587246219dbdabf8ca4253f8def7bd980f03330c89b98dd13e3e131db4db8d88eb90025c556aebbe7',NULL,NULL,NULL,'MAD','superadmin','2026-01-17 17:57:47.334408');
INSERT INTO "user" VALUES(4,'admin@example.com','scrypt:32768:8:1$M8z35DNQSBdGw2Ke$830770a6ee16e94633f68daf15461a737e8e225c643259541df363d7b640284b987bc1c9749a2c956acd8faa662594fb8ce1f649c1bac383c294f4ae7583226f',NULL,NULL,NULL,'MAD','admin','2026-01-17 17:57:47.334408');
CREATE TABLE user_challenge (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	plan_id INTEGER NOT NULL, 
	status VARCHAR(20), 
	starting_balance FLOAT NOT NULL, 
	equity FLOAT NOT NULL, 
	day_start_equity FLOAT NOT NULL, 
	day_start_date DATE NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES user (id), 
	FOREIGN KEY(plan_id) REFERENCES "plan" (id)
);
INSERT INTO "user_challenge" VALUES(1,1,1,'active',5000.0,5000.0,5000.0,'2026-01-17','2026-01-17 17:57:47.340424');
INSERT INTO "user_challenge" VALUES(2,2,1,'active',5000.0,5000.0,5000.0,'2026-01-17','2026-01-17 17:57:47.340424');
COMMIT;
