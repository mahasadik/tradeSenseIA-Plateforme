BEGIN TRANSACTION;
CREATE TABLE "plan" (
	id INTEGER NOT NULL, 
	name VARCHAR(80) NOT NULL, 
	price_dh INTEGER NOT NULL, 
	starting_balance FLOAT NOT NULL, 
	PRIMARY KEY (id)
);
INSERT INTO "plan" VALUES(1,'Starter',199,5000.0);
INSERT INTO "plan" VALUES(2,'Pro',399,10000.0);
INSERT INTO "plan" VALUES(3,'Elite',799,20000.0);
CREATE TABLE setting (
	id INTEGER NOT NULL, 
	"key" VARCHAR(80) NOT NULL, 
	value VARCHAR(255) NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
);
INSERT INTO "setting" VALUES(1,'PAYPAL_CLIENT_ID','AcaYVYe8hGjEAJuqCwvNNoEUEQD235RulN4O3AuFRVcT2nI23FozaC-pN08OJlBf5lvd_OxwCt2f_qb_');
INSERT INTO "setting" VALUES(2,'PAYPAL_CLIENT_SECRET','EPg93E3pOK2Jn7E6LtasdHwxbaM2Xn-CJf_YpCv49iFmnvctgOUUGAzXnbCGDBXNiBAVqLBg3PVH_98r');
INSERT INTO "setting" VALUES(3,'PAYPAL_MODE','sandbox');
CREATE TABLE trade (
	id INTEGER NOT NULL, 
	challenge_id INTEGER NOT NULL, 
	symbol VARCHAR(30) NOT NULL, 
	market VARCHAR(20) NOT NULL, 
	side VARCHAR(10) NOT NULL, 
	qty FLOAT NOT NULL, 
	entry_price FLOAT NOT NULL, 
	exit_price FLOAT, 
	pnl FLOAT, 
	status VARCHAR(10), 
	opened_at DATETIME, 
	closed_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(challenge_id) REFERENCES user_challenge (id)
);
INSERT INTO "trade" VALUES(1,1,'AAPL','YAHOO','BUY',1.0,150.0,155.0,5.0,'CLOSED','2026-01-12 19:39:55.300801',NULL);
INSERT INTO "trade" VALUES(2,1,'TSLA','YAHOO','SELL',2.0,700.0,NULL,NULL,'OPEN','2026-01-12 19:39:55.300809',NULL);
INSERT INTO "trade" VALUES(3,3,'AAPL','YAHOO','BUY',1.0,2.6080999755859375e+02,2.6119000244140625e+02,0.3800048828125,'CLOSED','2026-01-12 19:54:23.068648','2026-01-12 20:01:57.375366');
INSERT INTO "trade" VALUES(4,3,'AAPL','YAHOO','SELL',1.0,2.61149993896484375e+02,2.61170013427734375e+02,-0.02001953125,'CLOSED','2026-01-12 19:59:34.049361','2026-01-12 20:01:48.493622');
INSERT INTO "trade" VALUES(5,3,'AAPL','YAHOO','BUY',10.0,2.61039886474609375e+02,2.6104998779296875e+02,0.10101318359375,'CLOSED','2026-01-12 20:02:24.573547','2026-01-12 20:14:36.368029');
INSERT INTO "trade" VALUES(6,3,'AAPL','YAHOO','BUY',10.0,2.61029998779296875e+02,2.60894989013671875e+02,-1.35009765625,'CLOSED','2026-01-12 20:14:44.462911','2026-01-12 20:26:25.539037');
INSERT INTO "trade" VALUES(7,3,'AAPL','YAHOO','BUY',10.0,2.608900146484375e+02,2.6095001220703125e+02,0.5999755859375,'CLOSED','2026-01-12 20:26:41.674476','2026-01-12 20:30:58.341296');
INSERT INTO "trade" VALUES(8,3,'AAPL','YAHOO','BUY',12.0,2.61045013427734375e+02,NULL,NULL,'OPEN','2026-01-12 20:44:11.096197',NULL);
INSERT INTO "trade" VALUES(9,4,'AAPL','YAHOO','BUY',1.0,260.25,260.25,0.0,'CLOSED','2026-01-12 23:07:02.174860','2026-01-13 00:41:26.176456');
INSERT INTO "trade" VALUES(10,4,'AAPL','YAHOO','SELL',1.0,2.6104998779296875e+02,2.6104998779296875e+02,0.0,'CLOSED','2026-01-13 22:54:11.234118','2026-01-14 00:04:00.541611');
CREATE TABLE user (
	id INTEGER NOT NULL, 
	email VARCHAR(180) NOT NULL, 
	password_hash VARCHAR(255) NOT NULL, 
	first_name VARCHAR(100), 
	last_name VARCHAR(100), 
	phone VARCHAR(20), 
	currency VARCHAR(10), 
	role VARCHAR(30), 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (email)
);
INSERT INTO "user" VALUES(1,'alice@example.com','scrypt:32768:8:1$Pwp0c5XONSd1dbkC$53c994aceaa4cb5ff2157ba69ba136e93e9824575dc3e2017e6f91f68d5036904196b5ff0131b29f3bd514f86b342011250c4f4a75b5c39416f4816abf5c2d80',NULL,NULL,NULL,'MAD','user','2026-01-12 19:39:55.231602');
INSERT INTO "user" VALUES(2,'bob@example.com','scrypt:32768:8:1$9SN2w98Lu7QInEN2$7aaa9d457bc540a8332d39c6b49269a038a0d7fddf3b2a391f4e3508e0a2b09d125a4dd09dcc0ed0dc7aa8fb87ae8f29b3e4c1defe86ed1f156e5441344e7b8b',NULL,NULL,NULL,'MAD','user','2026-01-12 19:39:55.231609');
INSERT INTO "user" VALUES(3,'admin@example.com','scrypt:32768:8:1$3ydk1QN95F6ERQAh$c51788f37c8a1d4b13ace2908727e0c1e683a7e91c98a0f695a33fb192db9656d4ad60c9747f70c0d6a0f3027f3b517975d7ea9379d80ae97d7dedca91b2c9a2',NULL,NULL,NULL,'MAD','superadmin','2026-01-12 19:39:55.270423');
INSERT INTO "user" VALUES(4,'ahmed@example.com','scrypt:32768:8:1$3AZ3HhMZ8m5mVOaT$a9be971ffa45dd4e6f74484a8ccc84e6243303dc4be9b3f22926ed59403510f682b856c6c59d61480a3cfbbfcc28bcdec6cb9b46682785ea31d83b17fbdde53e','Ahmed','Chikhaoui','','MAD','admin','2026-01-12 22:43:30.707334');
INSERT INTO "user" VALUES(5,'mahasadik@example.com','scrypt:32768:8:1$ezFw84br2nsvuIYS$77152bb0922748105b5efc6cc6d80d7ea3e230a2469ecfceb261a227bd2fc2e5a81e8d4ce0ec397e5bd355a06b22b03ee8e23f41f1ca5d4eb40d78e43f0bbf1e','maha','sadik',NULL,'MAD','user','2026-01-16 17:02:53.750113');
CREATE TABLE user_challenge (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	plan_id INTEGER NOT NULL, 
	status VARCHAR(20), 
	starting_balance FLOAT NOT NULL, 
	equity FLOAT NOT NULL, 
	day_start_equity FLOAT NOT NULL, 
	day_start_date DATE NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES user (id), 
	FOREIGN KEY(plan_id) REFERENCES "plan" (id)
);
INSERT INTO "user_challenge" VALUES(1,1,1,'active',500.0,500.0,500.0,'2026-01-12','2026-01-12 19:39:55.286948');
INSERT INTO "user_challenge" VALUES(2,2,1,'active',500.0,500.0,500.0,'2026-01-12','2026-01-12 19:39:55.286958');
INSERT INTO "user_challenge" VALUES(3,3,1,'failed',500.0,1.867459838867187614e+02,500.0,'2026-01-12','2026-01-12 19:45:26.989946');
INSERT INTO "user_challenge" VALUES(4,4,2,'active',1000.0,1000.0,1000.0,'2026-01-14','2026-01-12 22:43:59.021491');
INSERT INTO "user_challenge" VALUES(5,4,2,'passed',1000.0,1000.0,1000.0,'2026-01-13','2026-01-13 16:45:52.929632');
COMMIT;
